---
title: "What is Structural Equation Modeling?"
subtitle: "Basic Introduction to PLS-SEM in SEMinR"
author: "Lilian Kojan and André Calero Valdez"
date: "updated: `r Sys.Date()`"
params:
  videoSlides: 
    label: "Should slides be rendered for video production?"
    value: FALSE
output:
  xaringan::moon_reader:
    css: ["xaringan-themer.css", "printing.css"]
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r xaringan-themer, include=FALSE, warning=FALSE}
source(here::here("slides", "style.R"))
```


```{r setup, include = FALSE}
library(tidyverse)
library(seminr)
library(jmv)
library(DiagrammeR)
#library(dataforsocialscience)
```

# Welcome

- Structural equation modeling using **SEMinR**

--

- Basic course: 7 videos

--

- Focus on **partial least squares** structural equation modeling (PLS-SEM) - as opposed to **covariance-based** structural equation modeling (CB-SEM)

???

Hello and welcome to our online course on structural equation modeling using SEM-in-R or SEMinR.

In this course, I will take you through the principles and practices of structural equation modeling using the SEM-in-R package for the R Programming language.

-

The basic section of this course is split into seven videos.
They reflect the sequence of steps you will take when designing a structural equation model of your own.
If you are curious for more after that, you are welcome to proceed to the advanced section.
There, I will go into more detail on some of the issues touched upon in the basic section.
I will also describe some more sophisticated modeling techniques.
Before starting with the content of this first video in earnest, I need to add one thing:

-

In structural modeling, there are two main streams.
Partial least squares equation modeling, which is also known as variance-based structural equation modeling, and covariance-based structural equation modeling.
Although you can do both types of modeling in SEMinR, we will focus on PLS-SEM in this series.
Now that is out of the way, let's start with the introduction.

---

# What is Structural Equation Modeling?
1. Why use structural equation modeling, anyway?
2. Properties and components of a structural equation model
3. Process of estimating a model



???

In this video, I will introduce you to structural equation modeling, or SEM, from the perspective of an HCI-researcher or social scientist.
Instead of starting with a definition, I want to take a step back and explain why SEM might be interesting to you. 
Then we will go more into the nitty-gritty.

---

# Why structural equation modeling?

As researchers in HCI or in the social sciences, we study human properties (operationalized as **variables**) and **how** they are related.
- Human variables: Often impossible to measure directly.
- How: Ideally, what causes what?


???

In a very broad sense, we are interested in humans, what they think, their attitudes, their behavior, and their reasons for doing things.
To study humans, we measure variables and examine the relationships between different variables.
And in many cases, we would like to know if variables are related and the direction of the relationship.
We want to know what causes what.

As we study humans, variables are often tough to measure.
Sure, we can measure a person's height pretty easily.
But what about, e.g., their attitude towards smoking?

---

# Why structural equation modeling?

From properties to **variables**...

--

... using survey items:

![](figures/items-to-variables.svg)

???

One way to find out a persons' attitude towards smoking is to ask them.
In a scientific context, we tend to use surveys for that.
If you are familiar with survey methodology, you know that to get from individual 
survey questions or items to variables, we have to do multiple steps.

-

Variables are typically constructed from multiple items.
Therefore, we have to conduct a factor analysis and examine reliability.

---

# Why structural equation modeling?
.pull_left[
From association between **variables**...

![](figures/correlation.svg)
]


--

.pull-right[
... to causation?

![](figures/causation.svg)
]

???

Now, suppose we have done that for all our survey items and are left with a set of variables.
Can we now find out which variable causes which?

-

The short answer to that is probably not.
To clarify this, let's take a look at a typical regression equation.

---

# Why structural equation modeling?

Regression equations can be reversed.

.pull-left[
### DV is height
$$height = b\times attitude_{smoking} + c$$
]

--

.pull-right[
### DV is attitude towards smoking
$$ attitude_{smoking} = \frac{height - c}{b} $$
]

Both sides are mathematically equivalent.
There is no causation in math.

???

In this linear equation, height is the dependent variable and attitude towards smoking is the independent variable.

-

But if the left side is true, the right side is also true.
There is no causal direction in mathematics.
So we cannot determine if changes in height cause changes in attitude, or vice-versa.
---

# Why structural equation modeling?



.pull-left[
![](figures/RCT.svg)

]
.pull-right[
Gold standard of causal statistics: **Randomized control trial**

Changes in $Attitude_{A,2}$ but not in $Attitude_{B,2}$ are **caused** by the experimental intervention
]

???

The gold standard of causal statistics is the randomized control trial.
We have two groups of test subjects that are randomly assigned to a condition.
Here, group A is the experimental group and group B is the control group.
In our example, we want to test the effect of an intervention on a person's attitude towards smoking.
The experimental group is then presented with that intervention.
For example, that might be a message on the dangers of smoking.
The control group is presented with no message at all, or an unrelated message.
Now, we compare the changes in attitude between both groups.
Changes that only occur in the experimental group are likely caused by our intervention.

---
# Why structural equation modeling?

Causal inference and observational data?

--

Causal interpretation is possible **if** 

- there is strong support of that interpretation by theory and previous evidence
- the model design circumvents different interpretations

using causal modeling techniques, e.g., Directed Acyclic Graphs (DAGs) or **Structural Equation Modeling**

Further reading:
Pearl (2012). The Causal Foundations of Structural Equation Modeling.

???

But experiments like these are often neither possible nor practical.
So what can we do if we have only observational data?
As we all know, correlation does not equal causation.
-
But although this topic is somewhat controversial, I do argue that you can relationships in observational data as causal.
For that, two conditions have to be met.
Firstly, the causal relationships you hypothesize should be well-grounded in theory.
And secondly, the model should be designed in way that leaves no room for other interpretations.
One of the techniques that can be used for such causal models is Structural Equation Modeling.
If you are interested in a discussion on the causal interpretation of structural equation models, I recommend the 2012 paper by Pearl shown here.

---

# Properties of a SEM

What are the advantages of structural equation modeling?

Allows for
- causal interpretation
- mediation analysis

Combines

- factor analysis
- regression equation


???

And as it turns out, structural equation models do not only lend themselves to causal interpretation.
They also address another difficulty I mentioned previously:
The way from measurement to variable.
This is done by combining factor analysis - that is, how a variable relates to its measurements - with regression equations - that is, how variables relate to or cause other variables.

---
# Components of a SEM
```{r echo=FALSE, include=FALSE}
seminr_theme_set(seminr_theme_dark())
examplemodel <- specify_model(
  measurement_model = constructs(
  composite(construct_name = "Reputation",
            item_names = multi_items("IMAG", 1:5),
            weights = correlation_weights),
  composite("Satisfaction",
            multi_items("CUSA", 1:3),
            mode_A),
  composite("Loyalty",
            multi_items("CUSL", 1:3))
  ),  
  structural_model = relationships(
  paths(
    from = c("Reputation", "Satisfaction"),
    to = "Loyalty")
  )
)
plot(examplemodel)
save_plot("figures/example-model.svg", width = 1000)
```
.pull-left[
![](figures/example-model.svg)
]
.pull-right[
<!-- It would be nice to color the text here so it has the same color as the figure, but I failed in my attempts lol -->
- Indicators (manifest variables)
- Constructs (latent variables)
- Measurement model: Relationships between indicators and constructs
- Structural model: Relationships between constructs and other constructs
]

???
To illustrate that, let's look at how a structural equation model might look.
The mustard rectangles represent the so-called indicators.
These are what we actually measured, e.g., the survey items.
The grey ellipses are called constructs, or variables.
<!-- @André: Please change the above code so we do have ellipses instead of hexagons. :) -->
The arrows from the constructs to the indicators show the measurement model.
The measurement model defines which construct is made up of which indicators.
The arrows between the constructs make up the structural model.
The direction of the arrow represents the direction of causality.
In this model, we hypothesize that a customer's satisfaction with a company and the company's reputation causes that customer's loyalty.

---
<!-- # Measurement model -->
<!-- ```{r echo=FALSE, include=FALSE} -->
<!-- plot(examplemodel, measurement_only = TRUE) -->
<!-- save_plot("figures/example-model_mm.svg", width = 1000) -->
<!-- ``` -->
<!-- .pull-left[ -->
<!-- ![](figures/example-model_mm.svg) -->
<!-- ] -->
<!-- .pull-right[ -->

<!-- ] -->
<!-- --- -->

# How a model is estimated - mathematically

- (Survey) data is provided for all indicators (latent variables)
- Measurement model and structural model are specified
- Both models are represented as a set of linear regression equations
- The regression equations are solved by a partial least squares algorithm
- The solution provides coefficients for all paths in the models


???
If you wonder now, how does it even work?


---

# How you estimate a model

???

Script missing

---

# Review

???

Script missing

---
# Sources for this video

Hair, J. F., Hult, G. T. M., Ringle, C. M., & Sarstedt, M. (2017). A primer on partial least squares structural equation modeling (PLS-SEM) (Second edition). Sage.

Pearl, J. (2012). The Causal Foundations of Structural Equation Modeling: Defense Technical Information Center. https://doi.org/10.21236/ADA557445

Ray, S. & Danks. N. (2020). SEMinR Vignette. https://cran.r-project.org/web/packages/seminr/vignettes/SEMinR.html
